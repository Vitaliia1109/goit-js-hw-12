{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// render-functions.js\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: \"topRight\"\n    });\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n\n    images.forEach(image => {\n        const card = document.createElement('div');\n        card.classList.add('card');\n        card.innerHTML = `\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"image\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <div class=\"details\">\n                <span>Likes: ${image.likes}</span>\n                <span>Views: ${image.views}</span>\n                <span>Comments: ${image.comments}</span>\n                <span>Downloads: ${image.downloads}</span>\n            </div>\n        `;\n        gallery.appendChild(card);\n    });\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}","// main.js\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\nimport { showError, clearGallery, renderImages } from \"./js/render-functions.js\";\n\nconst form = document.querySelector('#search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more-btn'); \nlet page = 1;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    \n    const query = form.querySelector('input').value.trim();\n    if (!query) {\n        showError('Please enter a search query');\n        return;\n    }\n\n    loader.style.display = 'block';\n    page = 1;\n\n    try {\n        const images = await searchImages(query, page);\n        if (images.length === 0) {\n            clearGallery();\n            showError('Sorry, there are no images matching your search query. Please try again!');\n            loadMoreBtn.style.display = 'none'; \n            return; \n        } else {\n            clearGallery();\n            renderImages(images);\n            if (images.length < 15) {  \n                loadMoreBtn.style.display = 'none';  \n                showError(\"We're sorry, but you've reached the end of search results.\");\n            } else {\n                loadMoreBtn.style.display = 'block'; \n            }\n        }\n    } catch (error) {\n        showError(error.message);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    const query = form.querySelector('input').value.trim();\n    if (!query) {\n        clearGallery();\n        showError('Please enter a search query');\n        return;\n    }\n\n    loader.style.display = 'block';\n\n    try {\n        page++; \n        const images = await searchImages(query, page);\n\n            renderImages(images);\n            scrollToNextPage();\n        if (images.length < 15) {\n            loadMoreBtn.style.display = 'none';\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        }\n        \n    } catch (error) {\n        showError(error.message);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nasync function searchImages(query, page) {\n    const apiKey = '42739945-76af92f6f6e2beeeb6ab8bd95';\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n        return response.data.hits;\n    } catch (error) {\n        throw new Error('Failed to fetch images');\n    }\n}\n\nfunction scrollToNextPage() {\n    const cardHeight = document.querySelector('.card').offsetHeight;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n}"],"names":["showError","message","iziToast","clearGallery","gallery","renderImages","images","image","card","SimpleLightbox","form","loader","loadMoreBtn","page","event","query","searchImages","error","scrollToNextPage","url","response","axios","cardHeight"],"mappings":"owBAOO,SAASA,EAAUC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAEO,SAASE,GAAe,CAC3B,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,CAEO,SAASC,EAAaC,EAAQ,CACjC,MAAMF,EAAU,SAAS,cAAc,UAAU,EAEjDE,EAAO,QAAQC,GAAS,CACpB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EACzBA,EAAK,UAAY;AAAA,uBACFD,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,+BAGnCA,EAAM,KAAK;AAAA,+BACXA,EAAM,KAAK;AAAA,kCACRA,EAAM,QAAQ;AAAA,mCACbA,EAAM,SAAS;AAAA;AAAA,UAG1CH,EAAQ,YAAYI,CAAI,CAChC,CAAK,EAEgB,IAAIC,EAAe,YAAY,EACvC,QAAO,CACpB,CCnCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAO,EAEXH,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAC7CA,EAAM,eAAc,EAEpB,MAAMC,EAAQL,EAAK,cAAc,OAAO,EAAE,MAAM,OAChD,GAAI,CAACK,EAAO,CACRf,EAAU,6BAA6B,EACvC,MACH,CAEDW,EAAO,MAAM,QAAU,QACvBE,EAAO,EAEP,GAAI,CACA,MAAMP,EAAS,MAAMU,EAAaD,EAAOF,CAAI,EAC7C,GAAIP,EAAO,SAAW,EAAG,CACrBH,IACAH,EAAU,0EAA0E,EACpFY,EAAY,MAAM,QAAU,OAC5B,MACZ,MACYT,IACAE,EAAaC,CAAM,EACfA,EAAO,OAAS,IAChBM,EAAY,MAAM,QAAU,OAC5BZ,EAAU,4DAA4D,GAEtEY,EAAY,MAAM,QAAU,OAGvC,OAAQK,EAAO,CACZjB,EAAUiB,EAAM,OAAO,CAC/B,QAAc,CACNN,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAC9C,MAAMG,EAAQL,EAAK,cAAc,OAAO,EAAE,MAAM,OAChD,GAAI,CAACK,EAAO,CACRZ,IACAH,EAAU,6BAA6B,EACvC,MACH,CAEDW,EAAO,MAAM,QAAU,QAEvB,GAAI,CACAE,IACA,MAAMP,EAAS,MAAMU,EAAaD,EAAOF,CAAI,EAEzCR,EAAaC,CAAM,EACnBY,IACAZ,EAAO,OAAS,KAChBM,EAAY,MAAM,QAAU,OAC5BZ,EAAU,4DAA4D,EAG7E,OAAQiB,EAAO,CACZjB,EAAUiB,EAAM,OAAO,CAC/B,QAAc,CACNN,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC,EAED,eAAeK,EAAaD,EAAOF,EAAM,CAGrC,MAAMM,EAAM,qEAA4CJ,CAAK,iEAAiEF,CAAI,eAElI,GAAI,CACA,MAAMO,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACpB,MAAM,IAAI,MAAM,wBAAwB,EAE5C,OAAOA,EAAS,KAAK,IACxB,MAAe,CACZ,MAAM,IAAI,MAAM,wBAAwB,CAC3C,CACL,CAEA,SAASF,GAAmB,CACxB,MAAMI,EAAa,SAAS,cAAc,OAAO,EAAE,aACnD,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}